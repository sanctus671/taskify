"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1592],{1592:function(w,h,r){r.r(h),r.d(h,{AddPlayerPageModule:function(){return Y}});var p=r(3144),u=r(5671),P=r(9808),y=r(4182),t=r(4881),_=r(1e3),v=r(2340),e=r(8433),Z=r(7020),A=r(622),C=r(7044),M=r(9646),T=r(8741);function x(n,i){if(1&n){var o=e.EpF();e.TgZ(0,"ion-item"),e.TgZ(1,"ion-label",5),e._uU(2,"Email"),e.qZA(),e.TgZ(3,"ion-input",6),e.NdJ("ngModelChange",function(l){return e.CHM(o),e.oxw().player.email=l}),e.qZA(),e.qZA()}if(2&n){var a=e.oxw();e.xp6(3),e.Q6J("ngModel",a.player.email)}}function O(n,i){1&n&&e._UZ(0,"ion-icon",16)}function b(n,i){if(1&n&&(e.TgZ(0,"ion-avatar",17),e._UZ(1,"img",18),e.qZA()),2&n){var o=e.oxw();e.xp6(1),e.Q6J("src",o.player.avatar,e.LSH)}}function J(n,i){1&n&&e._UZ(0,"ion-spinner")}var S=[{path:"",component:function(){var n=function(){function i(o,a,d,l,g,f,m,c,s){var N=this;(0,u.Z)(this,i),this.authenticationService=o,this.playerService=a,this.navController=d,this.alertCtrl=l,this.transfer=g,this.camera=f,this.loadingController=m,this.alertController=c,this.statusBar=s,this.player={new_account:!0},this.authenticationService.getJoinedSquad().then(function(k){N.player.squad_id=k})}return(0,p.Z)(i,[{key:"ngOnInit",value:function(){}},{key:"ionViewWillEnter",value:function(){this.statusBar.backgroundColorByHexString("#bb55d0")}},{key:"ionViewWillLeave",value:function(){this.statusBar.backgroundColorByHexString("#000000")}},{key:"add",value:function(){var a=this;this.player.loading=!0,this.playerService.createPlayer(this.player).then(function(){a.authenticationService.retreiveUserData(),a.player.loading=!1,a.navController.back()}).catch(function(){a.player.loading=!1,a.alertCtrl.create({header:"Error",message:"There was an error creating this player. Please try again.",buttons:[{text:"Dismiss",role:"cancel",handler:function(g){}}]}).then(function(l){l.present()})})}},{key:"changeImage",value:function(){var a=this;this.camera.getPicture({sourceType:this.camera.PictureSourceType.PHOTOLIBRARY,destinationType:this.camera.DestinationType.FILE_URI,encodingType:this.camera.EncodingType.JPEG,quality:25}).then(function(l){var g;a.loadingController.create({message:"Your image is being uploaded. Please wait...",duration:2e4}).then(function(c){g=c,c.present()});var f=a.transfer.create(),m={fileKey:"media_file",fileName:Math.random().toString(36).substring(2),params:{},mimeType:"image/jpeg"};f.upload(l,encodeURI(v.N.apiUrl+"/upload"),m).then(function(c){if(c.response){var s=JSON.parse(c.response);a.player.avatar=s.file}g.dismiss()},function(c){a.alertController.create({header:"Error",subHeader:"There was a problem uploading your image",message:JSON.stringify(c),buttons:[{text:"Dismiss",role:"cancel"}]}).then(function(s){s.present()}),g.dismiss()})},function(l){})}}]),i}();return n.\u0275fac=function(o){return new(o||n)(e.Y36(Z.$),e.Y36(A.l),e.Y36(t.SH),e.Y36(t.Br),e.Y36(C.K),e.Y36(M.V1),e.Y36(t.HT),e.Y36(t.Br),e.Y36(T.A))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-player"]],decls:29,vars:7,consts:[["color","primary"],["slot","start"],["defaultHref","/players"],[1,"add-player"],[1,"add-player__form"],["position","floating"],["clearInput","","type","email",3,"ngModel","ngModelChange"],[1,"add-player__form__checkbox"],["slot","end",3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"add-player__form__avatar"],["name","person",4,"ngIf"],["item-start","",4,"ngIf"],["color","primary",3,"click"],[1,"add-player-footer"],["color","primary","expand","full","shape","round",1,"add-player-footer__button",3,"disabled","click"],["name","person"],["item-start",""],[3,"src"]],template:function(o,a){1&o&&(e.TgZ(0,"ion-header"),e.TgZ(1,"ion-toolbar",0),e.TgZ(2,"ion-buttons",1),e._UZ(3,"ion-back-button",2),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"Add Player"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"ion-content",3),e.TgZ(7,"ion-list",4),e.TgZ(8,"ion-item"),e.TgZ(9,"ion-label",5),e._uU(10,"Player Name"),e.qZA(),e.TgZ(11,"ion-input",6),e.NdJ("ngModelChange",function(l){return a.player.name=l}),e.qZA(),e.qZA(),e.TgZ(12,"ion-item",7),e.TgZ(13,"ion-label"),e.TgZ(14,"h4"),e._uU(15,"Add as separate account"),e.qZA(),e.TgZ(16,"ion-note"),e._uU(17,"Gives the player their own login"),e.qZA(),e.qZA(),e.TgZ(18,"ion-checkbox",8),e.NdJ("ngModelChange",function(l){return a.player.new_account=l}),e.qZA(),e.qZA(),e.YNc(19,x,4,1,"ion-item",9),e.TgZ(20,"ion-item",10),e.YNc(21,O,1,0,"ion-icon",11),e.YNc(22,b,2,1,"ion-avatar",12),e.TgZ(23,"ion-button",13),e.NdJ("click",function(){return a.changeImage()}),e._uU(24,"Select Photo"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"ion-footer",14),e.TgZ(26,"ion-button",15),e.NdJ("click",function(){return a.add()}),e._uU(27," Add "),e.YNc(28,J,1,0,"ion-spinner",9),e.qZA(),e.qZA()),2&o&&(e.xp6(11),e.Q6J("ngModel",a.player.name),e.xp6(7),e.Q6J("ngModel",a.player.new_account),e.xp6(1),e.Q6J("ngIf",a.player.new_account),e.xp6(2),e.Q6J("ngIf",!a.player.avatar),e.xp6(1),e.Q6J("ngIf",a.player.avatar),e.xp6(4),e.Q6J("disabled",a.player.loading),e.xp6(2),e.Q6J("ngIf",a.player.loading))},directives:[t.Gu,t.sr,t.Sm,t.oU,t.cs,t.wd,t.W2,t.q_,t.Ie,t.Q$,t.pK,t.j9,y.JJ,y.On,t.uN,t.nz,t.w,P.O5,t.YG,t.fr,t.gu,t.BJ,t.PQ],styles:[".add-player[_ngcontent-%COMP%]   .add-player__form__checkbox[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{white-space:normal}.add-player[_ngcontent-%COMP%]   .add-player__form__checkbox[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{white-space:nowrap}.add-player[_ngcontent-%COMP%]   .add-player__form__avatar[_ngcontent-%COMP%]{margin-top:15px;margin-bottom:5px}.add-player[_ngcontent-%COMP%]   .add-player__form__avatar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{width:20px;height:20px;padding:10px;border-radius:20px;background-color:#000;color:#fff;margin-bottom:10px}.add-player[_ngcontent-%COMP%]   .add-player__form__avatar[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{margin-bottom:10px}.add-player[_ngcontent-%COMP%]   .add-player__form__avatar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-left:15px;margin-bottom:15px}.add-player-footer[_ngcontent-%COMP%]{background-color:#000}.add-player-footer[_ngcontent-%COMP%]:before{display:none}.add-player-footer[_ngcontent-%COMP%]   .add-player-footer__button[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px;margin-left:5px}"]}),n}()}],U=function(){var n=(0,p.Z)(function i(){(0,u.Z)(this,i)});return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[_.Bz.forChild(S)],_.Bz]}),n}(),Y=function(){var n=(0,p.Z)(function i(){(0,u.Z)(this,i)});return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[P.ez,y.u5,t.Pc,U]]}),n}()}}]);