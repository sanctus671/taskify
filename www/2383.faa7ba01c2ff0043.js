"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2383],{2383:function(k,_,r){r.r(_),r.d(_,{EditPlayerPageModule:function(){return U}});var u=r(3144),y=r(5671),C=r(9808),f=r(4182),n=r(4881),m=r(1e3),M=r(2340),e=r(8433),Z=r(7020),T=r(622),O=r(7044),E=r(9646),b=r(8741);function x(t,o){1&t&&e._UZ(0,"ion-icon",14)}function S(t,o){if(1&t&&(e.TgZ(0,"ion-avatar",15),e._UZ(1,"img",16),e.qZA()),2&t){var i=e.oxw();e.xp6(1),e.Q6J("src",i.player.avatar,e.LSH)}}function A(t,o){1&t&&e._UZ(0,"ion-spinner")}var J=[{path:"",component:function(){var t=function(){function o(i,a,s,l,p,h,P,c,d,B){var g=this;(0,y.Z)(this,o),this.authenticationService=i,this.playerService=a,this.navController=s,this.alertCtrl=l,this.transfer=p,this.camera=h,this.loadingController=P,this.alertController=c,this.activatedRoute=d,this.statusBar=B,this.player={id:parseInt(this.activatedRoute.snapshot.params.id)},this.authenticationService.getJoinedSquad().then(function(N){g.player.squad_id=N,g.playerService.getPlayer(g.player.id,g.player.squad_id).then(function(v){g.player=v,g.player.name=v.profile.name,g.player.avatar=v.profile.avatar})})}return(0,u.Z)(o,[{key:"ngOnInit",value:function(){}},{key:"ionViewWillEnter",value:function(){this.statusBar.backgroundColorByHexString("#bb55d0")}},{key:"ionViewWillLeave",value:function(){this.statusBar.backgroundColorByHexString("#000000")}},{key:"update",value:function(){var a=this;this.player.loading=!0,this.playerService.updatePlayer(this.player).then(function(){a.authenticationService.retreiveUserData(),a.player.loading=!1,a.navController.back()}).catch(function(){a.player.loading=!1,a.alertCtrl.create({header:"Error",message:"There was an error. Please try again.",buttons:[{text:"Dismiss",role:"cancel",handler:function(p){}}]}).then(function(l){l.present()})})}},{key:"changeImage",value:function(){var a=this;this.camera.getPicture({sourceType:this.camera.PictureSourceType.PHOTOLIBRARY,destinationType:this.camera.DestinationType.FILE_URI,encodingType:this.camera.EncodingType.JPEG,quality:25}).then(function(l){var p;a.loadingController.create({message:"Your image is being uploaded. Please wait...",duration:2e4}).then(function(c){p=c,c.present()});var h=a.transfer.create(),P={fileKey:"media_file",fileName:Math.random().toString(36).substring(2),params:{},mimeType:"image/jpeg"};h.upload(l,encodeURI(M.N.apiUrl+"/upload"),P).then(function(c){if(c.response){var d=JSON.parse(c.response);a.player.avatar=d.file}p.dismiss()},function(c){a.alertController.create({header:"Error",subHeader:"There was a problem uploading your image",message:JSON.stringify(c),buttons:[{text:"Dismiss",role:"cancel"}]}).then(function(d){d.present()}),p.dismiss()})},function(l){})}}]),o}();return t.\u0275fac=function(i){return new(i||t)(e.Y36(Z.$),e.Y36(T.l),e.Y36(n.SH),e.Y36(n.Br),e.Y36(O.K),e.Y36(E.V1),e.Y36(n.HT),e.Y36(n.Br),e.Y36(m.gz),e.Y36(b.A))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-edit-player"]],decls:21,vars:5,consts:[["color","primary"],["slot","start"],["defaultHref","/players"],[1,"edit-player"],[1,"edit-player__form"],["position","floating"],["clearInput","","type","email",3,"ngModel","ngModelChange"],[1,"edit-player__form__avatar"],["name","person",4,"ngIf"],["item-start","",4,"ngIf"],["color","primary",3,"click"],[1,"edit-player-footer"],["color","primary","expand","full","shape","round",1,"edit-player-footer__button",3,"disabled","click"],[4,"ngIf"],["name","person"],["item-start",""],[3,"src"]],template:function(i,a){1&i&&(e.TgZ(0,"ion-header"),e.TgZ(1,"ion-toolbar",0),e.TgZ(2,"ion-buttons",1),e._UZ(3,"ion-back-button",2),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"Edit Player"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"ion-content",3),e.TgZ(7,"ion-list",4),e.TgZ(8,"ion-item"),e.TgZ(9,"ion-label",5),e._uU(10,"Player Name"),e.qZA(),e.TgZ(11,"ion-input",6),e.NdJ("ngModelChange",function(l){return a.player.name=l}),e.qZA(),e.qZA(),e.TgZ(12,"ion-item",7),e.YNc(13,x,1,0,"ion-icon",8),e.YNc(14,S,2,1,"ion-avatar",9),e.TgZ(15,"ion-button",10),e.NdJ("click",function(){return a.changeImage()}),e._uU(16,"Select Photo"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"ion-footer",11),e.TgZ(18,"ion-button",12),e.NdJ("click",function(){return a.update()}),e._uU(19," Update "),e.YNc(20,A,1,0,"ion-spinner",13),e.qZA(),e.qZA()),2&i&&(e.xp6(11),e.Q6J("ngModel",a.player.name),e.xp6(2),e.Q6J("ngIf",!a.player.avatar),e.xp6(1),e.Q6J("ngIf",a.player.avatar),e.xp6(4),e.Q6J("disabled",a.player.loading),e.xp6(2),e.Q6J("ngIf",a.player.loading))},directives:[n.Gu,n.sr,n.Sm,n.oU,n.cs,n.wd,n.W2,n.q_,n.Ie,n.Q$,n.pK,n.j9,f.JJ,f.On,C.O5,n.YG,n.fr,n.gu,n.BJ,n.PQ],styles:[".edit-player[_ngcontent-%COMP%]   .edit-player__form__checkbox[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{white-space:normal}.edit-player[_ngcontent-%COMP%]   .edit-player__form__checkbox[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{white-space:nowrap}.edit-player[_ngcontent-%COMP%]   .edit-player__form__avatar[_ngcontent-%COMP%]{margin-top:15px;margin-bottom:5px}.edit-player[_ngcontent-%COMP%]   .edit-player__form__avatar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{width:20px;height:20px;padding:10px;border-radius:20px;background-color:#000;color:#fff;margin-bottom:10px}.edit-player[_ngcontent-%COMP%]   .edit-player__form__avatar[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{margin-bottom:10px}.edit-player[_ngcontent-%COMP%]   .edit-player__form__avatar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-left:15px;margin-bottom:15px}.edit-player-footer[_ngcontent-%COMP%]{background-color:#000}.edit-player-footer[_ngcontent-%COMP%]:before{display:none}.edit-player-footer[_ngcontent-%COMP%]   .edit-player-footer__button[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px;margin-left:5px}"]}),t}()}],Y=function(){var t=(0,u.Z)(function o(){(0,y.Z)(this,o)});return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[m.Bz.forChild(J)],m.Bz]}),t}(),U=function(){var t=(0,u.Z)(function o(){(0,y.Z)(this,o)});return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[C.ez,f.u5,n.Pc,Y]]}),t}()}}]);