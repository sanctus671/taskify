"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3472],{3472:function(U,P,r){r.r(P),r.d(P,{PlayersPageModule:function(){return b}});var u=r(3144),d=r(5671),p=r(9808),h=r(4182),o=r(4881),f=r(1e3),v=r(7762),n=r(8433),m=r(7020),Z=r(622),C=function(){return["/add-player"]};function M(t,i){1&t&&(n.TgZ(0,"div",11),n.TgZ(1,"ion-button",12),n._UZ(2,"ion-icon",13),n._uU(3," Add New Player "),n.qZA(),n.qZA()),2&t&&(n.xp6(1),n.Q6J("routerLink",n.DdM(1,C)))}function O(t,i){1&t&&(n.TgZ(0,"div",14),n._UZ(1,"ion-progress-bar",15),n.qZA())}function _(t,i){if(1&t&&(n.TgZ(0,"div",16),n.TgZ(1,"h6"),n._uU(2,"Squad coin total"),n.qZA(),n.TgZ(3,"span"),n._uU(4),n.qZA(),n.qZA()),2&t){var a=n.oxw();n.xp6(4),n.hij("",a.squadTotal," Coins")}}var q=function(i){return[i]};function T(t,i){if(1&t&&(n.TgZ(0,"ion-item",17),n.TgZ(1,"ion-label"),n._uU(2),n.qZA(),n.TgZ(3,"ion-note",18),n._uU(4),n.qZA(),n.qZA()),2&t){var a=i.$implicit;n.Q6J("routerLink",n.VKq(3,q,"/player/"+a.id)),n.xp6(2),n.Oqu(a.profile.name),n.xp6(2),n.hij("",a.total_coins," Coins")}}var A=[{path:"",component:function(){var t=function(){function i(a,e,s,c){var l=this;(0,d.Z)(this,i),this.alertCtrl=a,this.authenticationService=e,this.playerService=s,this.loadingController=c,this.user={},this.players=[],this.squad={},this.loading=!0,this.squadTotal=0,this.authenticationService.getUserData().subscribe(function(g){g&&(l.user=g,l.getJoinedSquad())})}return(0,u.Z)(i,[{key:"ionViewDidEnter",value:function(){var e=this;this.getJoinedSquad(),this.squad.id&&this.authenticationService.getSquadTotal(this.squad.id).then(function(s){e.squadTotal=s.total})}},{key:"ngOnInit",value:function(){}},{key:"getJoinedSquad",value:function(){var e=this;this.authenticationService.getJoinedSquad().then(function(s){if(s){var c=parseInt(s);if(e.squad.id!==c){e.squad.id=c;var g,l=(0,v.Z)(e.user.squads);try{for(l.s();!(g=l.n()).done;)if(g.value.id===s){e.userType="gamemaster";break}}catch(y){l.e(y)}finally{l.f()}e.authenticationService.getSquadTotal(e.squad.id).then(function(y){e.squadTotal=y.total})}e.getPlayers()}})}},{key:"getPlayers",value:function(){var e=this;this.playerService.getPlayers(this.squad.id).then(function(s){e.loading=!1,e.players=s,e.players.sort(function(c,l){return l.percentage-c.percentage})}).catch(function(){e.loading=!1})}}]),i}();return t.\u0275fac=function(a){return new(a||t)(n.Y36(o.Br),n.Y36(m.$),n.Y36(Z.l),n.Y36(o.HT))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-players"]],decls:15,vars:4,consts:[["translucent","true","mode","ios"],["mode","md"],["slot","start"],["fullscreen","true",1,"players"],["mode","ios"],["size","large"],["class","players__add",4,"ngIf"],["class","players__loading",4,"ngIf"],["class","players__squad-total",4,"ngIf"],[1,"players__player-list"],[3,"routerLink",4,"ngFor","ngForOf"],[1,"players__add"],["color","secondary","shape","round","routerDirection","forward",3,"routerLink"],["name","add"],[1,"players__loading"],["type","indeterminate","color","primary"],[1,"players__squad-total"],[3,"routerLink"],["slot","end"]],template:function(a,e){1&a&&(n.TgZ(0,"ion-header",0),n.TgZ(1,"ion-toolbar",1),n._UZ(2,"ion-title"),n.TgZ(3,"ion-buttons",2),n._UZ(4,"ion-back-button"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(5,"ion-content",3),n.TgZ(6,"ion-header",4),n.TgZ(7,"ion-toolbar"),n.TgZ(8,"ion-title",5),n._uU(9,"Players"),n.qZA(),n.qZA(),n.qZA(),n.YNc(10,M,4,2,"div",6),n.YNc(11,O,2,0,"div",7),n.YNc(12,_,5,1,"div",8),n.TgZ(13,"ion-list",9),n.YNc(14,T,5,5,"ion-item",10),n.qZA(),n.qZA()),2&a&&(n.xp6(10),n.Q6J("ngIf","gamemaster"===e.userType),n.xp6(1),n.Q6J("ngIf",e.loading),n.xp6(1),n.Q6J("ngIf",!e.loading),n.xp6(2),n.Q6J("ngForOf",e.players))},directives:[o.Gu,o.sr,o.wd,o.Sm,o.oU,o.cs,o.W2,p.O5,o.q_,p.sg,o.YG,o.YI,f.rH,o.gu,o.X7,o.Ie,o.Q$,o.uN],styles:["ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--border-color:transparent}.players[_ngcontent-%COMP%]   ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: #000000}.players[_ngcontent-%COMP%]   ion-header[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{position:static}.players[_ngcontent-%COMP%]   ion-header[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]   .toolbar-title[_ngcontent-%COMP%]{overflow:visible;white-space:normal}.players[_ngcontent-%COMP%]   .players__player-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{border:2px solid #ffffff;margin:10px;border-radius:10px;--background: #0FF0FC;--color: black}.players[_ngcontent-%COMP%]   .players__loading[_ngcontent-%COMP%]{padding:40px 20px 0}.players[_ngcontent-%COMP%]   .players__add[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:5px;padding:0 15px}.players[_ngcontent-%COMP%]   .players__squad-total[_ngcontent-%COMP%]{padding:0 15px;margin-top:30px}.players[_ngcontent-%COMP%]   .players__squad-total[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin:0;font-weight:700;font-size:16px}.players[_ngcontent-%COMP%]   .players__squad-total[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#ff6700;display:block;font-size:20px;margin-top:5px}.players[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{margin-top:15px}.players[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{padding-top:14px;font-size:14px;color:#ff6700}"]}),t}()}],S=function(){var t=(0,u.Z)(function i(){(0,d.Z)(this,i)});return t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[f.Bz.forChild(A)],f.Bz]}),t}(),b=function(){var t=(0,u.Z)(function i(){(0,d.Z)(this,i)});return t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[p.ez,h.u5,o.Pc,S]]}),t}()}}]);