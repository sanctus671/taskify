"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5559],{5559:function(E,f,s){s.r(f),s.d(f,{PlayerPageModule:function(){return B}});var g=s(3144),d=s(5671),_=s(9808),Z=s(4182),i=s(4881),p=s(1e3),P=s(7762),e=s(8433),T=s(7020),C=s(622),q=s(4303),x=s(5670),A=function(r){return[r]};function O(t,r){if(1&t&&(e.TgZ(0,"ion-button",15),e._uU(1," Edit "),e.qZA()),2&t){var n=e.oxw();e.Q6J("routerLink",e.VKq(1,A,"/edit-player/"+n.player.id))}}function M(t,r){if(1&t){var n=e.EpF();e.TgZ(0,"ion-button",16),e.NdJ("click",function(){return e.CHM(n),e.oxw().removePlayer()}),e._uU(1," Remove Player "),e.qZA()}}function b(t,r){1&t&&(e.TgZ(0,"span"),e._uU(1,"s"),e.qZA())}function w(t,r){1&t&&(e.TgZ(0,"span"),e._uU(1,"s"),e.qZA())}function U(t,r){1&t&&(e.TgZ(0,"span"),e._uU(1,"s"),e.qZA())}function Y(t,r){1&t&&(e.TgZ(0,"span"),e._uU(1,"s"),e.qZA())}function J(t,r){if(1&t){var n=e.EpF();e.TgZ(0,"ion-button",19),e.NdJ("click",function(){e.CHM(n);var o=e.oxw().$implicit;return e.oxw(2).completeQuest(o)}),e._UZ(1,"ion-icon",20),e._uU(2," Complete "),e.qZA()}}function Q(t,r){if(1&t&&(e.TgZ(0,"ion-item"),e.TgZ(1,"ion-label"),e.TgZ(2,"h4"),e._uU(3),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.qZA(),e.qZA(),e.YNc(6,J,3,0,"ion-button",18),e.qZA()),2&t){var n=r.$implicit,a=e.oxw(2);e.xp6(3),e.Oqu(n.quest.name),e.xp6(2),e.hij("",n.reward?n.reward:n.quest.reward," Coins"),e.xp6(1),e.Q6J("ngIf","gamemaster"===a.userType&&"claimed"!==n.status)}}function k(t,r){if(1&t&&(e.TgZ(0,"ion-list"),e.TgZ(1,"ion-list-header"),e._uU(2,"Current Quests"),e.qZA(),e.YNc(3,Q,7,3,"ion-item",17),e.qZA()),2&t){var n=e.oxw();e.xp6(3),e.Q6J("ngForOf",n.player.current_quests)}}function S(t,r){if(1&t&&(e.TgZ(0,"ion-item"),e.TgZ(1,"ion-label"),e.TgZ(2,"h4"),e._uU(3),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.qZA(),e.qZA(),e.qZA()),2&t){var n=r.$implicit;e.xp6(3),e.Oqu(n.quest.name),e.xp6(2),e.hij("",n.reward?n.reward:n.quest.reward," Coins")}}function I(t,r){if(1&t&&(e.TgZ(0,"ion-list"),e.TgZ(1,"ion-list-header"),e._uU(2,"Completed Quests"),e.qZA(),e.YNc(3,S,6,2,"ion-item",17),e.qZA()),2&t){var n=e.oxw();e.xp6(3),e.Q6J("ngForOf",n.player.completed_quests)}}function N(t,r){if(1&t){var n=e.EpF();e.TgZ(0,"ion-item"),e.TgZ(1,"ion-label"),e.TgZ(2,"h4"),e._uU(3),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"ion-button",19),e.NdJ("click",function(){var l=e.CHM(n).$implicit;return e.oxw(2).approveReward(l)}),e._UZ(7,"ion-icon",20),e._uU(8," Approve "),e.qZA(),e.qZA()}if(2&t){var a=r.$implicit;e.xp6(3),e.Oqu(a.reward.name),e.xp6(2),e.hij("",a.cost?a.cost:a.reward.cost," Coins")}}function F(t,r){if(1&t&&(e.TgZ(0,"ion-list"),e.TgZ(1,"ion-list-header"),e._uU(2,"Pending Rewards"),e.qZA(),e.YNc(3,N,9,2,"ion-item",17),e.qZA()),2&t){var n=e.oxw();e.xp6(3),e.Q6J("ngForOf",n.player.claimed_rewards)}}function R(t,r){if(1&t&&(e.TgZ(0,"ion-item"),e.TgZ(1,"ion-label"),e.TgZ(2,"h4"),e._uU(3),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.qZA(),e.qZA(),e.qZA()),2&t){var n=r.$implicit;e.xp6(3),e.Oqu(n.reward.name),e.xp6(2),e.hij("",n.cost?n.cost:n.reward.cost," Coins")}}function z(t,r){if(1&t&&(e.TgZ(0,"ion-list"),e.TgZ(1,"ion-list-header"),e._uU(2,"Claimed Rewards"),e.qZA(),e.YNc(3,R,6,2,"ion-item",17),e.qZA()),2&t){var n=e.oxw();e.xp6(3),e.Q6J("ngForOf",n.player.claimed_rewards)}}var H=function(r){return{"background-image":r}},j=[{path:"",component:function(){var t=function(){function r(n,a,o,c,l,u,y,h){var v=this;(0,d.Z)(this,r),this.alertCtrl=n,this.authenticationService=a,this.playerService=o,this.loadingController=c,this.activatedRoute=l,this.questService=u,this.rewardService=y,this.navController=h,this.player={id:parseInt(this.activatedRoute.snapshot.params.id),profile:{name:"Loading..."},current_quests:[],completed_quests:[],claimed_rewards:[],pending_rewards:[],total_coins:0,total_earned:0,total_spent:0},this.user={},this.squad={},this.authenticationService.getUserData().subscribe(function(m){m&&(v.user=m,v.getJoinedSquad())})}return(0,g.Z)(r,[{key:"ngOnInit",value:function(){}},{key:"getJoinedSquad",value:function(){var a=this;this.authenticationService.getJoinedSquad().then(function(o){if(o){var c=parseInt(o);if(a.squad.id!==c){a.squad.id=c;var u,l=(0,P.Z)(a.user.squads);try{for(l.s();!(u=l.n()).done;)if(u.value.id===o){a.userType="gamemaster";break}}catch(h){l.e(h)}finally{l.f()}}a.getPlayer()}})}},{key:"getPlayer",value:function(){var a=this;this.playerService.getPlayer(this.player.id,this.squad.id).then(function(o){a.player=o})}},{key:"removePlayer",value:function(){var a=this;this.alertCtrl.create({header:"Confirm",message:"You are about to remove this player from the squad. This will remove all coins the player has.",buttons:[{text:"Cancel",role:"cancel",handler:function(l){}},{text:"Remove",handler:function(l){a.playerService.deletePlayer(a.player.id).then(function(){a.authenticationService.retreiveUserData(),a.navController.back()})}}]}).then(function(c){c.present()})}},{key:"completeQuest",value:function(a){var o=this;this.alertCtrl.create({header:"Confirm",message:"You are about to complete this quest. Once completed, the player will receive the coins.",buttons:[{text:"Cancel",role:"cancel",handler:function(u){}},{text:"Complete",handler:function(u){a.status="claimed",o.questService.updatePlayerQuest(a).then(function(){o.authenticationService.retreiveUserData()})}}]}).then(function(l){l.present()})}},{key:"approveReward",value:function(a){var o=this;this.alertCtrl.create({header:"Confirm",message:"You are about to approve this reward. Once approved, the player will be deducted these coins.",buttons:[{text:"Cancel",role:"cancel",handler:function(u){}},{text:"Complete",handler:function(u){a.status="purchased",o.rewardService.updatePlayerReward(a).then(function(){})}}]}).then(function(l){l.present()})}}]),r}();return t.\u0275fac=function(n){return new(n||t)(e.Y36(i.Br),e.Y36(T.$),e.Y36(C.l),e.Y36(i.HT),e.Y36(p.gz),e.Y36(q.T),e.Y36(x.x),e.Y36(i.SH))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-player"]],decls:41,vars:18,consts:[[1,"ion-no-border"],["slot","start"],["defaultHref","/players"],["slot","end"],["routerDirection","forward",3,"routerLink",4,"ngIf"],["routerDirection","forward",3,"click",4,"ngIf"],[1,"player"],[1,"player__header"],[1,"player__header__avatar",3,"ngStyle"],[1,"player__header__coins"],[4,"ngIf"],[1,"player__header__overviews"],[1,"player__header__overviews__item"],[1,"player__header__overviews__item__number"],[1,"player__stats"],["routerDirection","forward",3,"routerLink"],["routerDirection","forward",3,"click"],[4,"ngFor","ngForOf"],["color","secondary","slot","end",3,"click",4,"ngIf"],["color","secondary","slot","end",3,"click"],["name","checkmark-circle-outline","slot","start"]],template:function(n,a){1&n&&(e.TgZ(0,"ion-header",0),e.TgZ(1,"ion-toolbar"),e.TgZ(2,"ion-buttons",1),e.TgZ(3,"ion-button"),e._UZ(4,"ion-back-button",2),e.qZA(),e.qZA(),e._UZ(5,"ion-title"),e.TgZ(6,"ion-buttons",3),e.YNc(7,O,2,3,"ion-button",4),e.YNc(8,M,2,0,"ion-button",5),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"ion-content",6),e.TgZ(10,"div",7),e._UZ(11,"div",8),e.TgZ(12,"h1"),e._uU(13),e.qZA(),e.TgZ(14,"div",9),e._uU(15),e.YNc(16,b,2,0,"span",10),e.qZA(),e.TgZ(17,"div",11),e.TgZ(18,"div",12),e.TgZ(19,"span",13),e._uU(20),e.qZA(),e._uU(21," Quest"),e.YNc(22,w,2,0,"span",10),e._uU(23," Completed "),e.qZA(),e.TgZ(24,"div",12),e.TgZ(25,"span",13),e._uU(26),e.qZA(),e._uU(27," Coin"),e.YNc(28,U,2,0,"span",10),e._uU(29," Earned "),e.qZA(),e.TgZ(30,"div",12),e.TgZ(31,"span",13),e._uU(32),e.qZA(),e._uU(33," Coin"),e.YNc(34,Y,2,0,"span",10),e._uU(35," Spent "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(36,"div",14),e.YNc(37,k,4,1,"ion-list",10),e.YNc(38,I,4,1,"ion-list",10),e.YNc(39,F,4,1,"ion-list",10),e.YNc(40,z,4,1,"ion-list",10),e.qZA(),e.qZA()),2&n&&(e.xp6(7),e.Q6J("ngIf",a.player.profile.user_id===a.user.id),e.xp6(1),e.Q6J("ngIf","gamemaster"===a.userType),e.xp6(3),e.Q6J("ngStyle",e.VKq(16,H,"url("+a.player.profile.avatar+")")),e.xp6(2),e.Oqu(a.player.profile.name),e.xp6(2),e.hij(" ",a.player.total_coins," Available Coin"),e.xp6(1),e.Q6J("ngIf",1!==a.player.total_coins),e.xp6(4),e.Oqu(a.player.completed_quests.length),e.xp6(2),e.Q6J("ngIf",1!==a.player.completed_quests.length),e.xp6(4),e.Oqu(a.player.total_earned),e.xp6(2),e.Q6J("ngIf",1!==a.player.total_earned),e.xp6(4),e.Oqu(a.player.total_spent),e.xp6(2),e.Q6J("ngIf",1!==a.player.total_spent),e.xp6(3),e.Q6J("ngIf",a.player.current_quests.length>0),e.xp6(1),e.Q6J("ngIf",a.player.completed_quests.length>0),e.xp6(1),e.Q6J("ngIf",a.player.pending_rewards.length>0&&"gamemaster"===a.userType),e.xp6(1),e.Q6J("ngIf",a.player.claimed_rewards.length>0))},directives:[i.Gu,i.sr,i.Sm,i.YG,i.oU,i.cs,i.wd,_.O5,i.W2,_.PC,i.YI,p.rH,i.q_,i.yh,_.sg,i.Ie,i.Q$,i.gu],styles:[".player[_ngcontent-%COMP%]   .player__header[_ngcontent-%COMP%]{background-color:#000;padding-bottom:40px;text-align:center}.player[_ngcontent-%COMP%]   .player__header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-transform:none}.player[_ngcontent-%COMP%]   .player__header[_ngcontent-%COMP%]   .player__header__avatar[_ngcontent-%COMP%]{width:180px;height:180px;border-radius:90px;background-color:#000;margin:0 auto;background-size:cover;background-position:center center;border:6px solid #0FF0FC}.player[_ngcontent-%COMP%]   .player__header[_ngcontent-%COMP%]   .player__header__coins[_ngcontent-%COMP%]{color:#ff6700}.player[_ngcontent-%COMP%]   .player__header[_ngcontent-%COMP%]   .player__header__overviews[_ngcontent-%COMP%]   .player__header__overviews__item[_ngcontent-%COMP%]{display:inline-block;width:33.33%;font-size:12px;margin-top:20px;opacity:.8}.player[_ngcontent-%COMP%]   .player__header[_ngcontent-%COMP%]   .player__header__overviews[_ngcontent-%COMP%]   .player__header__overviews__item[_ngcontent-%COMP%]   .player__header__overviews__item__number[_ngcontent-%COMP%]{display:block;font-size:15px}.player[_ngcontent-%COMP%]   .player__stats[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{font-size:18px;font-weight:700}.player[_ngcontent-%COMP%]   .player__stats[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ff6700}"]}),t}()}],D=function(){var t=(0,g.Z)(function r(){(0,d.Z)(this,r)});return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[p.Bz.forChild(j)],p.Bz]}),t}(),B=function(){var t=(0,g.Z)(function r(){(0,d.Z)(this,r)});return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[_.ez,Z.u5,i.Pc,D]]}),t}()}}]);